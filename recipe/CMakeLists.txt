cmake_minimum_required(VERSION 3.10)
project(command_line_tools)

set(CMAKE_CXX_STANDARD 11)
find_package (Threads)

add_executable(crop source/crop.cpp)
target_link_libraries (crop ${CMAKE_THREAD_LIBS_INIT})
add_executable(cut source/timecode.hpp source/cut.cpp)
target_link_libraries (cut ${CMAKE_THREAD_LIBS_INIT})
add_executable(dat_to_es source/dat.hpp source/dat_to_es.cpp)
target_link_libraries (dat_to_es ${CMAKE_THREAD_LIBS_INIT})
add_executable(es_to_csv source/es_to_csv.cpp)
target_link_libraries (es_to_csv ${CMAKE_THREAD_LIBS_INIT})
add_executable(es_to_frames source/es_to_frames.cpp)
target_link_libraries (es_to_frames ${CMAKE_THREAD_LIBS_INIT})
add_executable(es_to_ply source/es_to_ply.cpp)
target_link_libraries (es_to_ply ${CMAKE_THREAD_LIBS_INIT})
add_executable(event_rate source/event_rate.cpp)
target_link_libraries (event_rate ${CMAKE_THREAD_LIBS_INIT})
add_executable(evt2_to_es source/evt2_to_es.cpp)
target_link_libraries (evt2_to_es ${CMAKE_THREAD_LIBS_INIT})
add_executable(evt3_to_es source/evt3_to_es.cpp)
target_link_libraries (evt3_to_es ${CMAKE_THREAD_LIBS_INIT})
add_executable(rainbow source/rainbow.cpp)
target_link_libraries (rainbow ${CMAKE_THREAD_LIBS_INIT})
add_executable(rainmaker source/rainmaker.cpp third_party/lodepng/lodepng.cpp)
target_link_libraries (rainmaker ${CMAKE_THREAD_LIBS_INIT})
get_target_property(PROJECT_LOCATION rainmaker BINARY_DIR)
target_compile_definitions(rainmaker PRIVATE SEPIA_COMPILER_WORKING_DIRECTORY="${PROJECT_LOCATION}")
add_executable(size source/size.cpp)
target_link_libraries (size ${CMAKE_THREAD_LIBS_INIT})
add_executable(spatiospectrogram source/spatiospectrogram.cpp)
target_link_libraries (spatiospectrogram ${CMAKE_THREAD_LIBS_INIT})
add_executable(spectrogram source/spectrogram.cpp third_party/lodepng/lodepng.cpp)
target_link_libraries (spectrogram ${CMAKE_THREAD_LIBS_INIT})
add_executable(statistics source/statistics.cpp)
target_link_libraries (statistics ${CMAKE_THREAD_LIBS_INIT})
add_executable(synth source/synth.cpp)
target_link_libraries (synth ${CMAKE_THREAD_LIBS_INIT})

install(TARGETS crop DESTINATION bin)
install(TARGETS cut DESTINATION bin)
install(TARGETS dat_to_es DESTINATION bin)
install(TARGETS es_to_csv DESTINATION bin)
install(TARGETS es_to_frames DESTINATION bin)
install(TARGETS es_to_ply DESTINATION bin)
install(TARGETS event_rate DESTINATION bin)
install(TARGETS evt2_to_es DESTINATION bin)
install(TARGETS evt3_to_es DESTINATION bin)
install(TARGETS rainbow DESTINATION bin)
install(TARGETS rainmaker DESTINATION bin)
install(TARGETS size DESTINATION bin)
install(TARGETS spatiospectrogram DESTINATION bin)
install(TARGETS spectrogram DESTINATION bin)
install(TARGETS statistics DESTINATION bin)
install(TARGETS synth DESTINATION bin)
